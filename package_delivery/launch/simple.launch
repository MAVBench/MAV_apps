<launch>
  <!-- args and params --> 
  <!-- Behzad's workstation ip --> 
  <!-- arg name="host_ip" default="10.157.90.51" /-->
  <arg name="host_ip" default="10.16.0.172" />
  <!--arg name="host_ip" default="169.254.153.158" /-->
  <!-- Hasans's workstation ip --> 
  <!-- arg name="host_ip" default="10.157.90.49" /-->
  <!-- Hasans's direct connection ip --> 
  <!-- arg name="host_ip" default="169.254.250.191" /-->
  <!--Wenzhi's workstation ip-->
  <!--arg name="host_ip" default="10.157.90.62" /-->
  <!-- Sri's workstation ip --> 
  <!--arg name="host_ip" default="10.157.90.132" /-->
  <param name="/ip_addr" value="$(arg host_ip)" />

  <!-- Drone's physical characteristics /-->
  <arg name="a_max" default="5"/> 
  <arg name="v_max" default="2.5"/> 
  <arg name="future_col_drone_radius" default="1.5"/>
  <arg name="future_col_drone_height" default="0.6"/>
  <arg name="planner_drone_radius" default="2"/>
  <arg name="planner_drone_height" default="0.6"/>
  
  <arg name="planning_resolution" default=".15"/>
  <arg name="sensor_max_range" default="7" />
  <arg name="fly_trajectory_time_out" default=".01"/> 
  <arg name="planning_budget" default=".3"/>
  <param name="planning_budget" value="$(arg planning_budget)"/>

  <!-- orb slam location--> 
  <!--arg name="orb_slam2_dir" default="$(find ORB_SLAM2)/../../.."/--> 

  <arg name="max_yaw_rate" default="90"/>
  <arg name="max_yaw_rate_during_flight" default="90"/>
  <param name="v_max" value="$(arg v_max)"/>
  <param name="max_yaw_rate" value="$(arg max_yaw_rate)"/>
  <param name="max_yaw_rate_during_flight" value="$(arg max_yaw_rate_during_flight)"/>
  <param name="fly_trajectory_time_out" value="$(arg fly_trajectory_time_out)"/> 

  
  <!-- sensors /-->
  <arg name="all_front" default="true"/>	

  <!-- Set the localization method /-->
  <!--arg name="localization_method" default="orb_slam2_rgbd"/-->
  <!--arg name="localization_method" default="vins_mono" /-->
  <!--arg name="localization_method" default="gps" /-->
  <arg name="localization_method" default="ground_truth" />

  <param name="localization_method" value="$(arg localization_method)" />

  <!-- stat file-->
  <param name="stats_file_addr" value="$(find package_delivery)/../data/package_delivery/stats.json" />
  <param name="supervisor_mailbox" value="$(find package_delivery)/../data/package_delivery/supervisor_mailbox.txt" />

  <!-- setting DEBUG to false prevents publishing and subscribing to rviz /--> 
  <!-- also planning to prevent stdio stuff(if they really matter)-->
  <arg name="DEBUG" default="false" />
  <arg name="CLCT_DATA" value="true" />
  <param name="ros_DEBUG" type="bool" value="$(arg DEBUG)" />
  <param name="DEBUG"  value="$(arg DEBUG)" />
  <param name="CLCT_DATA" value="$(arg CLCT_DATA)"/>

  
  <group if="$(arg CLCT_DATA)">
  <param name="enable_statistics" value="true"/>
  </group> 

  <!-- only for to octomap and pt cloud--> 
  <arg name="data_collection_iteration_freq" value="150" />
  <param name="data_collection_iteration_freq_ptCld" value="$(eval 5*arg('data_collection_iteration_freq'))"/>



    <!-- Nodelet manager for this pipeline -->
    <node pkg="nodelet" type="nodelet" args="manager" name="depth_transforms_manager" output="screen">
    <!-- remap from="/points" to="/cloud_in" / -->
    </node>

    <!-- Convert to point cloud -->
    <node pkg="nodelet" type="nodelet" name="cloudify"
    args="load depth_image_proc/point_cloud_xyz depth_transforms_manager --no-bond" output="screen">

    <!-- Input: Camera calibration and metadata.  (sensor_msgs/CameraInfo) -->
    <remap from="rgb/camera_info" to="/Airsim/camera_info"/> 
    <!-- Input: Rectified depth image -->
    <remap from="image_rect" to="/Airsim/depth_front"/>

    </node>

    <node pkg="package_delivery" type="package_delivery" name="package_delivery" output="screen">
    <param name="ip_addr" value="$(arg host_ip)"/>
    <!-- param name="issue_cmd__time_step" value=".05"/-->
    <!-- param name="points_to_replan_after" value="1000000000"/-->
    <param name="v_max" value="$(arg v_max)"/>
    <param name="fly_trajectory_time_out" value="$(arg fly_trajectory_time_out)"/>
    <!-- Localization of the depth images -->
    <param name="localization_method" value="$(arg localization_method)" />
    </node>



    </launch>

